<div class="container">
  <h1 class="title">ğŸ¯ Juego de AdivinaciÃ³n</h1>

  <div class="config-section" *ngIf="!juegoIniciado">
    <h2>âš™ï¸ ConfiguraciÃ³n del Juego</h2>

    <div class="form-group">
      <label for="nombre">Nombre:</label>
      <div class="input-wrapper">
        <input type="text" id="nombre" [(ngModel)]="nombre" placeholder="Introduce tu nombre">
        <span class="feedback" *ngIf="nombre.length > 0">
          <span *ngIf="nombreValido" class="valid">âœ…</span>
          <span *ngIf="!nombreValido" class="error">El nombre no puede estar vacÃ­o</span>
        </span>
      </div>
    </div>

    <div class="form-group">
      <label for="apellido">Apellido:</label>
      <div class="input-wrapper">
        <input type="text" id="apellido" [(ngModel)]="apellido" placeholder="Introduce tu apellido">
        <span class="feedback" *ngIf="apellido.length > 0">
          <span *ngIf="apellidoValido" class="valid">âœ…</span>
          <span *ngIf="!apellidoValido" class="error">El apellido no puede estar vacÃ­o</span>
        </span>
      </div>
    </div>

    <div class="form-group">
      <label for="rango">Rango MÃ¡ximo:</label>
      <div class="input-wrapper">
        <input type="number" id="rango" [(ngModel)]="rangoMaximo" placeholder="MÃ­nimo 4" min="4">
        <span class="feedback" *ngIf="rangoMaximo !== null">
          <span *ngIf="rangoValido" class="valid">âœ…</span>
          <span *ngIf="!rangoValido" class="error">El rango debe ser mÃ­nimo 4</span>
        </span>
      </div>
      <small class="hint">Se generarÃ¡ un nÃºmero entre 0 y {{ rangoMaximo ? rangoMaximo - 1 : '?' }}</small>
    </div>

    <div class="form-group">
      <label for="intentos">NÃºmero de Intentos:</label>
      <div class="input-wrapper">
        <input type="number" id="intentos" [(ngModel)]="intentos" placeholder="Â¿CuÃ¡ntos intentos?" min="1">
        <span class="feedback" *ngIf="intentos !== null">
          <span *ngIf="intentosValidos" class="valid">âœ…</span>
          <span *ngIf="!intentosValidos" class="error">Debe ser al menos 1 intento</span>
        </span>
      </div>
    </div>

    <button class="btn-primary" [disabled]="!formularioValido" (click)="recogerDatos()">
      ğŸš€ Recoger Datos e Iniciar Juego
    </button>
  </div>

  <div class="game-section" *ngIf="juegoIniciado">
    <div class="welcome-message">
      <h2>Ongi Etorri {{ configuracion?.nombre }} {{ configuracion?.apellido }}</h2>
    </div>

    <div class="game-info">
      <p>ğŸ² Adivina un nÃºmero entre <strong>0</strong> y <strong>{{ configuracion!.rangoMaximo - 1 }}</strong></p>
      <p class="attempts-left">
        â¤ï¸ Intentos restantes:
        <span [class.low-attempts]="intentosRestantes <= 2">{{ intentosRestantes }}</span>
      </p>
    </div>

    <div class="locked-config">
      <h3>ğŸ“‹ ConfiguraciÃ³n Guardada</h3>
      <div class="config-display">
        <div class="config-item">
          <label>Nombre:</label>
          <input type="text" [value]="configuracion?.nombre" disabled>
        </div>
        <div class="config-item">
          <label>Apellido:</label>
          <input type="text" [value]="configuracion?.apellido" disabled>
        </div>
        <div class="config-item">
          <label>Rango:</label>
          <input type="number" [value]="configuracion?.rangoMaximo" disabled>
        </div>
        <div class="config-item">
          <label>Intentos:</label>
          <input type="number" [value]="configuracion?.intentos" disabled>
        </div>
      </div>
    </div>

    <div class="guess-section" *ngIf="!juegoTerminado">
      <div class="guess-input">
        <input type="number" [(ngModel)]="intentoActual" placeholder="Tu nÃºmero..." [min]="0"
          [max]="configuracion!.rangoMaximo - 1" (keyup.enter)="enviarIntento()">
        <button class="btn-send" (click)="enviarIntento()">
          ğŸ“¤ Enviar
        </button>
      </div>
    </div>

    <div class="feedback-message" *ngIf="mensaje" [style.color]="mensajeColor">
      <p>{{ mensaje }}</p>
    </div>
    <button class="btn-restart" *ngIf="juegoTerminado" (click)="reiniciarJuego()">
      ğŸ”„ Jugar de Nuevo
    </button>
  </div>
</div>